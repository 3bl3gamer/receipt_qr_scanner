<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="manifest" href="./receipt_qr_scanner.webmanifest" />
		<style>
			body {
				margin: 0;
				display: flex;
				justify-content: center;
				overflow: hidden;
			}

			.template {
				display: none;
			}

			.receipt-info-box-wrap {
				position: fixed;
				display: flex;
				flex-direction: column-reverse;
				top: 0;
				z-index: 1;
				max-height: 55px;
			}

			.receipt-info-box {
				height: 25px;
				padding: 3px;
				margin: 7px 0 0 0;
				box-sizing: border-box;
				border-radius: 4px;
				background-color: white;
				box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
				text-align: center;
				opacity: 0.8;
				transition: opacity 0.8s ease, height 0.3s ease, padding 0.3s ease, background-color 0.2s ease;
			}

			.receipt-info-box.collapsed {
				height: 0;
				opacity: 0;
				padding: 0;
			}

			.receipt-info-box:not(:first-child) {
				opacity: 0.4;
			}

			.receipt-info-box:empty {
				opacity: 0;
			}

			.receipt-info-box[data-status='saving'] {
				background-color: gray;
			}

			.receipt-info-box[data-status='error'] {
				background-color: salmon;
			}

			.receipt-info-box[data-status='saved'] {
				background-color: lightgreen;
			}

			.receipt-info-box[data-status='exists'] {
				background-color: khaki;
			}

			.video-wrap {
				position: relative;
				width: 100vw;
				height: 100vh;
			}

			.debug-mode-image,
			.open-image {
				position: absolute;
				width: 32px;
				height: 32px;
				top: 4px;
				right: 32px;
				border: none;
				padding: 0;
				background: none;
			}
			.debug-mode-image img,
			.open-image img {
				display: block;
				width: 100%;
				height: 100%;
			}
			.debug-mode-image {
				left: 4px;
			}
			.open-image {
				right: 32px;
			}

			.receipt-list-wrap {
				position: absolute;
				right: 0;
				width: 320px;
				height: 100vh;
				z-index: 2;
				overflow-y: auto;
				overflow-x: visible;
				background-color: white;
				border-left: 2px solid lightgray;
				transition: transform 0.3s ease, opacity 0.2s ease;
			}

			.receipt-list-wrap.hidden {
				transform: translateX(92%);
				opacity: 0.8;
			}

			.receipt-list-item {
				white-space: nowrap;
				padding: 5px;
				overflow: hidden;
				transition: margin 0.3s ease, background-color 1s ease;
				box-sizing: border-box;
			}

			.receipt-list-item.correct {
				background-color: #ffb;
			}

			.receipt-list-item.filled {
				background-color: #dfd;
			}

			.receipt-list-item.failed {
				background-color: #fdd;
			}

			.receipt-list-item.collapsed {
				margin-top: -82px;
			}

			.receipt-list-wrap.hidden .receipt-list-item.collapsed {
				background-color: yellow;
			}

			.receipt-list-item .title > * {
				overflow: hidden;
				text-overflow: ellipsis;
				font-weight: bold;
			}

			.receipt-list-item .main-info {
				display: flex;
				justify-content: space-between;
				font-size: 90%;
				margin: 4px 0;
			}

			.receipt-list-item .sub-info {
				display: flex;
				justify-content: space-between;
				font-size: 70%;
				color: gray;
			}

			.receipt-list-item .retail_place_address {
				max-width: 100%;
				direction: rtl;
				overflow: hidden;
				text-overflow: ellipsis;
			}

			.receipt-list-item:not(:first-child) {
				border-top: 1px solid lightgray;
			}
		</style>
	</head>
	<body>
		<div class="receipt-info-box-wrap"></div>
		<div class="video-wrap"></div>
		<button class="debug-mode-image"><img src="developer_mode_icon.svg" /></button>
		<button class="open-image"><img src="image_icon.svg" /></button>
		<div class="receipt-list-wrap hidden"></div>

		<script src="{{.BundleFPath}}"></script>

		<div class="template receipt-list-item">
			<div class="title">
				<div class="user"></div>
			</div>
			<div class="main-info">
				<time class="created_at"></time>
				<div class="total_sum"></div>
			</div>
			<div class="sub-info">
				<div class="retail_place_address"></div>
			</div>
			<div class="sub-info">
				<div class="id"></div>
				<div class="items_count"></div>
				<div class="retries_left"></div>
			</div>
		</div>
	</body>
</html>
